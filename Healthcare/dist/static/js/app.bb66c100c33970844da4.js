webpackJsonp([7],{"/2Df":function(e,t,n){"use strict";var o={render:function(){var e=this.$createElement;return(this._self._c||e)("input",{ref:"input",attrs:{type:"text",placeholder:this.placeholder},domProps:{value:this.value}})},staticRenderFns:[]};t.a=o},"/yRs":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("diQi"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var s=n("VJKn");var i=function(e){n("TbrU")},c=n("VU/8")(a.a,s.a,!1,i,null,null);t.default=c.exports},0:function(e,t){},1:function(e,t){},"1/oy":function(e,t){},"5ZbH":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("kXiA"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var s=n("WdFJ");var i=function(e){n("I2yM")},c=n("VU/8")(a.a,s.a,!1,i,null,null);t.default=c.exports},"5cLx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Vj7G"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var s=n("ZHGh"),i=n("VU/8")(a.a,s.a,!1,null,null,null);t.default=i.exports},"9M+g":function(e,t){},I2yM:function(e,t){},Id91:function(e,t){},Jmt5:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a=n("/ocq");o.a.use(a.a);var r=new a.a({mode:"history",routes:[{path:"/",name:"home",component:function(e){Promise.all([n.e(0),n.e(3)]).then(function(){var t=[n("vira")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/login",name:"login",component:function(e){Promise.all([n.e(0),n.e(5)]).then(function(){var t=[n("NaOX")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/dashboard",name:"dashboard",component:function(e){Promise.all([n.e(0),n.e(1)]).then(function(){var t=[n("6Tz/")];e.apply(null,t)}.bind(this)).catch(n.oe)},beforeEnter:function(e,t,n){var o=r.app.$options.store;null==o.getters.user||!o.getters.isLoggedIn&&null!=o.getters.user.type?n({path:"/login",query:{redirect:e.fullPath}}):n()}},{path:"/dossier",name:"dossier",component:function(e){Promise.all([n.e(0),n.e(2)]).then(function(){var t=[n("noXG")];e.apply(null,t)}.bind(this)).catch(n.oe)}},{path:"/register",name:"register",component:function(e){Promise.all([n.e(0),n.e(4)]).then(function(){var t=[n("lXzh")];e.apply(null,t)}.bind(this)).catch(n.oe)}}]});var s,i=r,c=n("8+8L"),u=n("e6fC"),l=n("NYxO"),d=n("//Fk"),h=n.n(d),f=n("bOdI"),p=n.n(f),m=n("mtWM"),g=n.n(m),v=n("DmT9"),_=n.n(v),S=n("424j");o.a.use(l.a);var E="http://35.195.241.255:8081/api/",y=new l.a.Store({plugins:[Object(S.a)({paths:["isLoggedIn","user"]})],state:{isLoggedIn:!!localStorage.getItem("healthcare"),pending:!1,user:null,chatSession:null,chats:null},mutations:(s={},p()(s,"PENDING",function(e){e.pending=!0}),p()(s,"LOGIN_SUCCES",function(e){e.isLoggedIn=!0,e.pending=!1}),p()(s,"LOGIN_FAILED",function(e){e.isLoggedIn=!1,e.pending=!1}),p()(s,"LOGOUT",function(e){e.isLoggedIn=!1,e.user=null,e.pending=!1}),p()(s,"REQUEST_SUCCES",function(e){e.pending=!0}),p()(s,"REQUEST_FAIL",function(e){e.pending=!0}),p()(s,"USER_CHANGED",function(e,t){e.user=t,e.pending=!1}),p()(s,"SOCKET_SETUP",function(e,t){e.chatSession=t}),p()(s,"CHATSESSION_CHANGED",function(e,t){e.chatSession=t}),p()(s,"CHAT_UPDATE",function(e,t){var n=e.chatSession.chats.find(function(e){return e.id==t.id}),a=e.chatSession.chats.indexOf(n);-1==a&&(a=e.chatSession.chats.length),o.a.set(e.chatSession.chats,a,t)}),p()(s,"NEW_MESSAGE",function(e,t){var n=e.chatSession.chats.find(function(e){return e.id===t.chatId}),a=e.chatSession.chats.indexOf(n);o.a.set(e.chatSession.chats[a].messages,e.chatSession.chats[a].messages.length,t)}),s),actions:{login:function(e,t){var n=e.commit;return n("PENDING"),console.log("logging in..."),new h.a(function(e){setTimeout(function(){g()({method:"post",url:E+"oauth/token",params:{grant_type:"password",username:t.email,password:t.password,scope:"read",client_id:"pharmacy"},headers:{Authorization:"Basic cGhhcm1hY3k6c2VjcmV0","content-type":"application/x-www-form-urlencoded"}}).then(function(t){t instanceof Error?(console.log(t),localStorage.setItem("error","true")):console.log("hoi"),console.log("hier komt ie wel"),localStorage.setItem("healthcare",t.data.access_token),console.log(t),n("LOGIN_SUCCES"),t.data.user.mappedDoctor=t.data.mappedDoctor,n("USER_CHANGED",t.data.user),e()}).catch(function(e){return console.log(e.response),localStorage.setItem("error","false"),localStorage.removeItem("healthcare"),n("LOGIN_FAILED"),h.a.reject(e.response)})},1e3)})},logout:function(e){var t=e.commit;localStorage.removeItem("healthcare"),t("LOGOUT")},getRequest:function(e,t){return(0,e.commit)("PENDING"),new h.a(function(e){setTimeout(function(){g()({method:"get",url:E+t,headers:{Authorization:"Bearer"+localStorage.getItem("healthcare")}}).then(function(t){e(t.data)}).catch(function(t){e(t)})})},1e3)},putRequest:function(e,t){return(0,e.commit)("PENDING"),new h.a(function(e){setTimeout(function(){console.log(t.url),console.log(t.body),g()({method:"put",url:E+t.url,headers:{"Content-Type":"application/x-www-form-urlencoded"},params:t.body}).then(function(t){e(t.data)}).catch(function(t){e(t)})},1e3)})},postRequest:function(e,t){return(0,e.commit)("PENDING"),new h.a(function(e){setTimeout(function(){console.log(t.url),console.log(t.body),g()({method:"post",url:E+t.url,headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("healthcare")},data:t.body}).then(function(t){e(t.data)}).catch(function(t){e(t)})},1e3)})},deleteRequest:function(e,t){return(0,e.commit)("PENDING"),new h.a(function(e){setTimeout(function(){console.log(t.url),console.log(t.body),g()({method:"delete",url:E+t.url,headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("healthcare")},data:t.body}).then(function(t){e(t.data)}).catch(function(t){e(t)})},1e3)})},updateRequest:function(e,t){return(0,e.commit)("PENDING"),new h.a(function(e){setTimeout(function(){console.log(t.url),console.log(t.body),g()({method:"update",url:E+t.url,headers:{"Content-Type":"application/json",Authorization:"Bearer"+localStorage.getItem("healthcare")},data:t.body}).then(function(t){e(t.data)}).catch(function(t){e(t)})},1e3)})},setupSockets:function(e,t){var n=e.commit,o={socket:null,status:"disconnected",chats:[]},a=_()("http://localhost:3000");o.socket=a,a.on("connect",function(){a.emit("authenticate",t),console.log("user connected"),o.status="connected",a.on("disconnect",function(){console.log("user disconnected"),o.status="disconnected"}),a.on("user_joined",function(e){console.log(e),console.log("user joined id "+e.user.user_id+" on room "+e.room.id),e.room.messages.forEach(function(e){e.date=new Date(e.date)}),n("CHAT_UPDATE",e.room)}),a.on("user_left",function(e){console.log("user left id "+e.user.user_id+" from room "+e.room.id),console.log(e.room),n("CHAT_UPDATE",e.room)}),a.on("new_message",function(e){e.date=new Date(e.date),console.log("new message "+e.message+" from "+e.sender.user_id+" on "+e.chatId),n("NEW_MESSAGE",e)})}),n("SOCKET_SETUP",o)}},getters:{isLoggedIn:function(e){return e.isLoggedIn},isPending:function(e){return e.pending},user:function(e){return e.user},chatSession:function(e){return e.chatSession},chats:function(e){return e.chats}}}),T=(n("Jmt5"),n("9M+g"),{render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("div",{staticClass:"app-content"},[t("router-view")],1)])},staticRenderFns:[]}),I=n("VU/8")({name:"app",data:function(){return{}}},T,!1,null,null,null).exports,w={headers:{Authorization:"Basic ZGVtb2FwcDpkZW1vcGFzcw=="},emulateJSON:!0},A={install:function(e,t){var n=this;e.http.interceptors.push(function(e,t){var o=y.state.auth.accessToken,a=e.headers.has("Authorization");o&&!a&&n.setAuthHeader(e),t(function(t){if(n._isInvalidToken(t))return n._refreshToken(e)})}),e.prototype.$auth=e.auth=this},login:function(e,t){var n=this,a={grant_type:"password",username:e.username,password:e.password};return o.a.http.post("/auth",a,w).then(function(e){return n._storeToken(e),t&&i.push({name:t}),e}).catch(function(e){return e})},logout:function(){y.commit("CLEAR_ALL_DATA"),i.push({name:"login"})},setAuthHeader:function(e){e.headers.set("Authorization","Bearer "+y.state.auth.accessToken),e.params.access_token=y.state.auth.accessToken},_retry:function(e){return this.setAuthHeader(e),o.a.http(e).then(function(e){return e}).catch(function(e){return e})},_refreshToken:function(e){var t=this,n={grant_type:"refresh_token",refresh_token:y.state.auth.refreshToken};return o.a.http.post("/auth",n,w).then(function(n){return t._storeToken(n),t._retry(e)}).catch(function(e){return t._isInvalidToken(e)&&t.logout(),e})},_storeToken:function(e){var t=y.state.auth,n=y.state.user;t.isLoggedIn=!0,t.accessToken=e.body.access_token,t.refreshToken=e.body.refresh_token,n.name="John Smith",y.commit("UPDATE_AUTH",t),y.commit("UPDATE_USER",n)},_isInvalidToken:function(e){var t=e.status,n=e.data.error;return 401===t&&("invalid_token"===n||"expired_token"===n)}},b=n("sA6N");o.a.use(c.a),o.a.use(u.a),o.a.use(l.a),o.a.config.productionTip=!1,o.a.use(A),o.a.use(b,{load:{key:"AIzaSyCVr8MxDiZLgjHJiIy6uVmhx_aE74J4x0c",libraries:"places"}}),new o.a({el:"#app",created:function(){window.Vue=this},router:i,store:y,render:function(e){return e(I)}})},O1XB:function(e,t,n){"use strict";var o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("label",[t("span",{domProps:{textContent:this._s(this.label)}}),this._v(" "),t("input",{ref:"input",class:this.className,attrs:{type:"text",placeholder:this.placeholder}})])},staticRenderFns:[]};t.a=o},TbrU:function(e,t){},VJKn:function(e,t,n){"use strict";var o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vue-street-view-pano-container"},[t("div",{ref:"vue-street-view-pano",staticClass:"vue-street-view-pano"}),this._v(" "),this._t("default")],2)},staticRenderFns:[]};t.a=o},WdFJ:function(e,t,n){"use strict";var o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"vue-map-container"},[t("div",{ref:"vue-map",staticClass:"vue-map"}),this._v(" "),t("div",{staticClass:"vue-map-hidden"},[this._t("default")],2),this._v(" "),this._t("visible")],2)},staticRenderFns:[]};t.a=o},YI6p:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("jIen"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var s=n("O1XB"),i=n("VU/8")(a.a,s.a,!1,null,null,null);t.default=i.exports},ZHGh:function(e,t,n){"use strict";var o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{ref:"flyaway"},[this._t("default")],2)])},staticRenderFns:[]};t.a=o},preG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("osty"),a=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,function(){return o[e]})}(r);var s=n("/2Df"),i=n("VU/8")(a.a,s.a,!1,null,null,null);t.default=i.exports},zj2Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.bb66c100c33970844da4.js.map